// 简单的端口检测函数
async function checkPort(port, protocol = 'http') {
  const url = `${protocol}://127.0.0.1:${port}`;
  const startTime = Date.now();
  
  try {
    const response = await fetch(url, {
      method: 'HEAD',
      mode: 'no-cors',
      cache: 'no-cache'
    });
    const responseTime = Date.now() - startTime;
    console.log(`✅ 端口 ${port} 连接成功 (${responseTime}ms)`);
    return true;
  } catch (error) {
    const responseTime = Date.now() - startTime;
    console.log(`❌ 端口 ${port} 连接失败 (${responseTime}ms)`);
    return false;
  }
}

// 批量检查常用端口
async function scanCommonPorts() {
  const commonPorts = [3000, 3001, 8080, 8081, 8000, 5000, 5900, 3306, 5432, 27017];
  console.log('开始扫描常用端口...');
  
  for (const port of commonPorts) {
    await checkPort(port);
    await new Promise(resolve => setTimeout(resolve, 100)); // 避免请求过快
  }
}

// 执行扫描
scanCommonPorts();